spring:
  application:
    name: UserManagementAPI

  profiles:
    active: dev

  datasource:
    driver-class-name: org.postgresql.Driver
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/authdb}
    username: ${SPRING_DATASOURCE_USERNAME:authuser}
    password: ${SPRING_DATASOURCE_PASSWORD:authpass}
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT_AMQP:5672}
    username: ${RABBITMQ_USER:guest}
    password: ${RABBITMQ_PASSWORD:guest}

  elasticsearch:
    uris: ${ELASTICSEARCH_URIS:http://localhost:9200}
    username: ${ELASTIC_USERNAME:elastic}
    password: ${ELASTIC_PASSWORD:changeme}

  mail:
    host: ${MAIL_HOST:maildev}
    port: ${MAIL_PORT:1025}
    properties:
      mail.smtp.auth: false
      mail.smtp.starttls.enable: false

  security:
    auth:
      enabled: true
    username-password:
      enabled: true
    magiclink:
      enabled: true
    jwt:
      enabled: true
    oauth2:
      enabled: true
      client:
        registration:
          google:
            client-id: ${OAUTH_GOOGLE_CLIENT_ID:}
            client-secret: ${OAUTH_GOOGLE_CLIENT_SECRET:}
            scope:
              - openid
              - profile
              - email
            client-name: Google
            redirect-uri: "{app.magic-link.base-url}/login/oauth2/code/google"
            authorization-grant-type: authorization_code
          github:
            client-id: ${OAUTH_GITHUB_CLIENT_ID:}
            client-secret: ${OAUTH_GITHUB_CLIENT_SECRET:}
            scope:
              - user:email
            client-name: GitHub
            redirect-uri: "{app.magic-link.base-url}/login/oauth2/code/github"
            authorization-grant-type: authorization_code

memcached:
  host: ${MEMCACHED_HOST:localhost}
  port: ${MEMCACHED_PORT:11211}

jwt:
  secret: ${JWT_SECRET:ryC7jo+dRm+je+WH8wObgDbPRTMslE3P+APNl5he7aBqrwnnCM6nvxULrGeROgV8f3X4evcGiipvTQpngQUG6g}
  expiration: ${JWT_EXPIRATION:3600000}
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}

security:
  jwt:
    exclude-paths: /api/auth/**,/actuator/**,/oauth2/**,/login/**

app:
  magic-link:
    expiration-minutes: 15
    base-url: ${APP_BASE_URL:http://localhost:8080}

management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
      show-components: always

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html

logging:
  file:
    name: logs/usermanagement.log
  level:
    root: INFO
    org.springframework: INFO
    org.hibernate: INFO
    org.springframework.security: DEBUG
    com.dmcdoc.usermanagement: DEBUG
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n"

server:
  port: ${SERVER_PORT:8080}
  address: 0.0.0.0
  forward-headers-strategy: FRAMEWORK

dotenv:
  enabled: true

debug: false
