# src/main/resources/application.properties

# Le profil actif est injecté automatiquement depuis l'environnement
# ✅ Valeur par défaut

spring.profiles.active=dev 

# Base de données
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://192.168.56.15:5432/authdb
spring.datasource.username=authuser
spring.datasource.password=authpass

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Dans src/main/resources/application.properties
server.port=${SERVER_PORT}


# RabbitMQ
spring.rabbitmq.host=localhost
spring.rabbitmq.port=${RABBITMQ_PORT_AMQP}
spring.rabbitmq.username=${RABBITMQ_USER}
spring.rabbitmq.password=${RABBITMQ_PASSWORD}

# Memcached (si utilisé)
memcached.host=localhost
memcached.port=${MEMCACHED_PORT}

# Elasticsearch
spring.elasticsearch.uris=http://localhost:${ELASTIC_HTTP_PORT}
spring.elasticsearch.username=elastic
spring.elasticsearch.password=${ELASTIC_PASSWORD}

# JWT
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}
# JWT Refresh Token
# Durée refresh token en millisecondes (7 jours ici)
security.jwt.refresh-expiration=604800000


# Port d'écoute
server.port=${SERVER_PORT}

# Actuator
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE}

# Logging

# --- Logging ---
logging.level.root=INFO
logging.level.com.example.usermanagement=DEBUG
logging.file.name=logs/usermanagement.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n
logging.level.org.springframework=INFO
server.port=8080
spring.application.name=UserManagementAPI
# --- logging level for specific packages ---
logging.level.org.springframework.security=DEBUG

# --- health checks ---
management.endpoints.web.exposure.include=health,info
management.endpoint.health.enabled=true
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always

# --- CORS Configuration ---
server.address=0.0.0.0

# Désactiver la validation du host pour éviter les erreurs 400
# Pour conserver les headers du proxy
server.forward-headers-strategy=FRAMEWORK 

# --- Debugging ---
debug=true

# --- Dotenv ---
dotenv.enabled=true
